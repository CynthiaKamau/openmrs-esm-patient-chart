<div *ngIf="!isLoading">
    <div class="error-text">{{ loadingError }}</div>
    <div class="form-title" [ngClass]="{'error': hasValidationErrors}">
        <span *ngIf="encounter" class="omrs-type-body-small" style="color: var(--omrs-color-ink-medium-contrast);">
            <svg class="omrs-icon title-icon-size" fill="var(--omrs-color-ink-low-contrast)">
                <use xlink:href="#omrs-icon-calendar"></use>
            </svg>
            {{encounterDate + " "}}
            <svg class="omrs-icon title-icon-size" fill="var(--omrs-color-ink-low-contrast)">
                <use xlink:href="#omrs-icon-access-time"></use>
            </svg>
            {{encounterTime}}
        </span>
    </div>
    <div *ngIf="!formSubmitted" [ngClass]="{'error': hasValidationErrors}">
        <div class="content" (click)="onErrorPanelLostFocus()">

            <form class="bx--form no-padding" *ngIf="formSchema" [formGroup]="form.rootNode.control">
                <form-renderer [node]="form.rootNode"></form-renderer>
            </form>
            <div class="bx--row button-margin">
                <button (click)="onCancel()" class="bx--btn bx--btn--secondary" type="button"
                    style="width: 50%;">Cancel</button>
                <button class="bx--btn bx--btn--primary" (click)="onSubmit($event)" type="submit"
                    style="width: 50%;">Save</button>
            </div>
        </div>
    </div>
    <div class="form-container">
        <my-app-form-submitted *ngIf="formSubmitted" (cancelled)="onCancel()" (editRequested)="onEditSaved()">
        </my-app-form-submitted>
    </div>
</div>

<div *ngIf="isLoading" class="center" id="loading-spinner">
    <div class="omrs-loading-spinner">
        <div data-inline-loading="" class="bx--inline-loading" role="alert" aria-live="assertive">
            <div class="bx--inline-loading__animation">
                <div data-inline-loading-spinner="" class="bx--loading bx--loading--small">
                    <svg class="bx--loading__svg" viewBox="-75 -75 150 150">
                        <circle class="bx--loading__background" cx="0" cy="0" r="26.8125"></circle>
                        <circle class="bx--loading__stroke" cx="0" cy="0" r="26.8125"></circle>
                    </svg>
                </div>
            </div>
            <p data-inline-loading-text-active="" class="bx--inline-loading__text">Loading ...</p>
        </div>
    </div>
</div>